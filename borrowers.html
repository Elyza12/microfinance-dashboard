<!DOCTYPE html>
<html>
<head>
<title>Borrowers</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-4">
<h2>Borrowers</h2>

<form id="borrowerForm" class="row g-2 mb-3">
<div class="col"><input class="form-control" placeholder="Full Name" id="name" required></div>
<div class="col"><input class="form-control" placeholder="Phone" id="phone"></div>
<div class="col"><input class="form-control" placeholder="Address" id="address"></div>
<div class="col"><button class="btn btn-primary">Add</button></div>
</form>

<table class="table table-bordered bg-white">
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Phone</th>
<th>Address</th>
<th>Status</th>
</tr>
</thead>
<tbody id="borrowersTable"></tbody>
</table>
</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbzJPQZw9vc81-X2GzYKUB44tk7q7IJQJG7lfmVG8mAnjcBOED0Jn700WmH13-Zv2ZJTDQ/exec";

async function loadBorrowers(){
const res=await fetch(`${API_URL}?action=borrowers`);
const data=await res.json();

const table=document.getElementById("borrowersTable");
table.innerHTML="";
data.forEach(b=>{
table.innerHTML+=`
<tr>
<td>${b.BorrowerID}</td>
<td>${b.FullName}</td>
<td>${b.Phone||""}</td>
<td>${b.Address||""}</td>
<td>${b.Status||"Active"}</td>
</tr>`;
});
}

borrowerForm.addEventListener("submit",async e=>{
e.preventDefault();
await fetch(`${API_URL}?action=addBorrower&name=${name.value}&phone=${phone.value}&address=${address.value}`);
borrowerForm.reset();
loadBorrowers();
});

loadBorrowers();
</script>

</body>
</html>
